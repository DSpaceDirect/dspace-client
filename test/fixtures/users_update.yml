---
http_interactions:
- request:
    method: post
    uri: https://demo.dspacedirect.org/server/api/authn/login
    body:
      encoding: US-ASCII
      string: "<AUTHENTICATION>"
    headers:
      User-Agent:
      - Faraday v1.10.0
      Content-Type:
      - application/x-www-form-urlencoded
      X-XSRF-Token: []
  response:
    status:
      code: 403
      message: '403'
    headers:
      date:
      - Sat, 02 Jul 2022 21:49:27 GMT
      content-type:
      - application/json;charset=UTF-8
      transfer-encoding:
      - chunked
      connection:
      - keep-alive
      server:
      - Apache/2.4.53 (Unix)
      vary:
      - Origin,Access-Control-Request-Method,Access-Control-Request-Headers
      set-cookie:
      - DSPACE-XSRF-COOKIE=eb517545-2548-4fc8-a930-811241c9f26b; Path=/server; Secure;
        HttpOnly; SameSite=None
      dspace-xsrf-token:
      - eb517545-2548-4fc8-a930-811241c9f26b
      x-content-type-options:
      - nosniff
      x-xss-protection:
      - 1; mode=block
      cache-control:
      - no-cache, no-store, max-age=0, must-revalidate
      pragma:
      - no-cache
      expires:
      - '0'
      strict-transport-security:
      - max-age=315360000, max-age=315360000
      x-frame-options:
      - SAMEORIGIN
      referrer-policy:
      - strict-origin-when-cross-origin
      permissions-policy:
      - interest-cohort=()
      content-security-policy:
      - 'default-src https: ''unsafe-inline'' ''unsafe-eval'''
      access-control-expose-headers:
      - Authorization, expires, Location, Content-Disposition, WWW-Authenticate, Set-Cookie,
        X-Requested-With, DSPACE-XSRF-TOKEN
    body:
      encoding: UTF-8
      string: '{"timestamp":"2022-07-02T21:49:27.946+00:00","status":403,"error":"Forbidden","message":"Access
        is denied. Invalid CSRF token.","path":"/server/api/authn/login"}'
  recorded_at: Sat, 02 Jul 2022 21:49:27 GMT
- request:
    method: post
    uri: https://demo.dspacedirect.org/server/api/authn/login
    body:
      encoding: US-ASCII
      string: "<AUTHENTICATION>"
    headers:
      User-Agent:
      - Faraday v1.10.0
      Content-Type:
      - application/x-www-form-urlencoded
      X-XSRF-Token:
      - eb517545-2548-4fc8-a930-811241c9f26b
      Cookie:
      - DSPACE-XSRF-COOKIE=eb517545-2548-4fc8-a930-811241c9f26b
  response:
    status:
      code: 200
      message: '200'
    headers:
      date:
      - Sat, 02 Jul 2022 21:49:28 GMT
      transfer-encoding:
      - chunked
      connection:
      - keep-alive
      server:
      - Apache/2.4.53 (Unix)
      vary:
      - Origin,Access-Control-Request-Method,Access-Control-Request-Headers
      set-cookie:
      - DSPACE-XSRF-COOKIE=; Path=/server; Max-Age=0; Expires=Thu, 01 Jan 1970 00:00:00
        GMT; Secure; HttpOnly; SameSite=None, DSPACE-XSRF-COOKIE=bff77496-d6c5-40e6-b0d0-24c56cc5e005;
        Path=/server; Secure; HttpOnly; SameSite=None
      dspace-xsrf-token:
      - bff77496-d6c5-40e6-b0d0-24c56cc5e005
      authorization:
      - "<TOKEN>"
      x-content-type-options:
      - nosniff
      x-xss-protection:
      - 1; mode=block
      cache-control:
      - no-cache, no-store, max-age=0, must-revalidate
      pragma:
      - no-cache
      expires:
      - '0'
      strict-transport-security:
      - max-age=315360000, max-age=315360000
      x-frame-options:
      - SAMEORIGIN
      referrer-policy:
      - strict-origin-when-cross-origin
      permissions-policy:
      - interest-cohort=()
      content-security-policy:
      - 'default-src https: ''unsafe-inline'' ''unsafe-eval'''
      access-control-expose-headers:
      - Authorization, expires, Location, Content-Disposition, WWW-Authenticate, Set-Cookie,
        X-Requested-With, DSPACE-XSRF-TOKEN
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Sat, 02 Jul 2022 21:49:28 GMT
- request:
    method: patch
    uri: https://demo.dspacedirect.org/server/api/eperson/epersons/de9209ca-3cd9-49a1-a3ea-5fea15c31cb5
    body:
      encoding: UTF-8
      string: '[{"op":"replace","path":"/canLogin","value":"true"}]'
    headers:
      Authorization:
      - "<TOKEN>"
      X-XSRF-Token:
      - bff77496-d6c5-40e6-b0d0-24c56cc5e005
      Cookie:
      - DSPACE-XSRF-COOKIE=bff77496-d6c5-40e6-b0d0-24c56cc5e005
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: '200'
    headers:
      date:
      - Sat, 02 Jul 2022 21:49:28 GMT
      content-type:
      - application/hal+json;charset=UTF-8
      transfer-encoding:
      - chunked
      connection:
      - keep-alive
      server:
      - Apache/2.4.53 (Unix)
      vary:
      - Origin,Access-Control-Request-Method,Access-Control-Request-Headers
      content-language:
      - en
      x-content-type-options:
      - nosniff
      x-xss-protection:
      - 1; mode=block
      cache-control:
      - no-cache, no-store, max-age=0, must-revalidate
      pragma:
      - no-cache
      expires:
      - '0'
      strict-transport-security:
      - max-age=315360000, max-age=315360000
      x-frame-options:
      - SAMEORIGIN
      referrer-policy:
      - strict-origin-when-cross-origin
      permissions-policy:
      - interest-cohort=()
      content-security-policy:
      - 'default-src https: ''unsafe-inline'' ''unsafe-eval'''
      access-control-expose-headers:
      - Authorization, expires, Location, Content-Disposition, WWW-Authenticate, Set-Cookie,
        X-Requested-With, DSPACE-XSRF-TOKEN
    body:
      encoding: UTF-8
      string: '{"id":"de9209ca-3cd9-49a1-a3ea-5fea15c31cb5","uuid":"de9209ca-3cd9-49a1-a3ea-5fea15c31cb5","name":"user@institution.edu","handle":null,"metadata":{},"netid":null,"lastActive":null,"canLogIn":true,"email":"user@institution.edu","requireCertificate":false,"selfRegistered":false,"type":"eperson","_links":{"groups":{"href":"https://demo.dspacedirect.org/server/api/eperson/epersons/de9209ca-3cd9-49a1-a3ea-5fea15c31cb5/groups"},"self":{"href":"https://demo.dspacedirect.org/server/api/eperson/epersons/de9209ca-3cd9-49a1-a3ea-5fea15c31cb5"}}}'
  recorded_at: Sat, 02 Jul 2022 21:49:28 GMT
recorded_with: VCR 6.1.0
